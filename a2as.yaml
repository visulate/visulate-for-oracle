manifest:
  version: "0.1.3"
  schema: https://a2as.org/cert/schema
  subject:
    name: visulate/visulate-for-oracle
    source: https://github.com/visulate/visulate-for-oracle
    branch: master
    commit: "775a7274"
    scope: [ai-agent/comment_generator/agent.py, ai-agent/invalid_objects/main.py, ai-agent/common/tools.py, ai-agent/object_analysis_agent/agent.py,
      ai-agent/erd_agent/agent.py, ai-agent/root_agent/remote_tool.py, ai-agent/schema_analysis_agent/agent.py, ai-agent/root_agent/main.py,
      ai-agent/root_agent/agent.py, ai-agent/comment_generator/app.py, ai-agent/comment_generator/main.py, ai-agent/invalid_objects/agent.py,
      ai-agent/nl2sql_agent/agent.py, ai-agent/erd_agent/main.py, ai-agent/app_developer/agent.py, ai-agent/nl2sql_agent/main.py,
      ai-agent/schema_analysis_agent/main.py, ai-agent/app_developer/main.py, ai-agent/object_analysis_agent/main.py, ai-agent/common/service_template.py]
  issued:
    by: A2AS.org
    at: '2026-02-11T16:54:06Z'
    url: https://a2as.org/certified/agents/visulate/visulate-for-oracle
  signatures:
    digest: sha256:5FdzRpRVrsnXmtY9b7NBurS-kP3TJpBCEeiSWCeToNE
    key: ed25519:T1nL_8v0TsdQoaljgG_iJ8O_Kr9b0N5EmfuHAshvTXc
    sig: ed25519:vlnkbWiO95GacS34Fb1a4VYEyrypXqALpMe9YKDOLd9lNX22QBBX6IQ5fLyw9FOkcvjepi3sQLCyu_Pa4_HGDg

agents:
  agent:
    type: instance
    models: [gemini-flash-latest]
    tools: [api_server_tools, query_engine_tools, create_connection_token_tool, create_generate_comments_tool]
    params:
      name: comment_generator_agent
      description: An agent that generates comments for Oracle database objects.
      instruction: [You are the Oracle Comment Generator Agent., Your purpose is to generate meaningful comments for Oracle
          database objects (tables and views) that are missing them., 'You have a tool `generate_comments` that performs the
          following:', 1. Identifies tables and views in a specific schema that lack comments., 2. Inspects their structure
          and sample data., 3. Uses a generative AI model to create descriptive comments., 4. Generates a SQL script with
          "COMMENT ON" statements., 'When asked to generate comments, use the `generate_comments` tool.', Check the provided
          input context for database ("endpoint") and schema ("owner") names., 'If not found in the context or message, ask
          the user for them.', You can optionally accept a wildcard pattern to filter object names.]
      function: create_comment_generator_agent
  agent.create_app_developer_agent:
    type: factory
    models: [gemini-flash-latest]
    tools: [api_server_tools.5, progress_tool, save_tool]
    mcp: [api_server_tools.5]
    params:
      name: app_developer_agent
      description: Specialized agent for generating code and migration scripts based on database metadata
      instruction: [You are the Visulate Application Developer Agent., 'Your role is to assist with database-centric application
          development, including generating code, migration scripts, and analyzing dependencies.', '## Your Goal', Generate
          high-quality code and migration scripts based on database metadata. Support multiple languages and migration scenarios.,
        '## Your Capabilities', '1. **Code Generation**: Generate PL/SQL (packages, procedures, functions, triggers), SQL
          (DDL, DML), Java, Python, JavaScript, and other languages as requested.', '2. **Migration Support**: Create data
          migration plans and scripts. This includes generating DDL for new structures, DML for data movement, and cleanup
          scripts.', '3. **Dependency Analysis**: Use `getContext` with `relationships=''ALL''` to identify metadata and analyze
          the impact of changes.', '4. **Multi-File Output**: You can generate multiple files for a single task (e.g., a migration
          might require a setup SQL, a migration SQL, and a cleanup SQL).', '## Your Workflow', '1. **Gather Metadata**: Use
          `getContext` with `relationships=''ALL''` on relevant objects to understand the current structure and dependencies.',
        '2. **Analyze Requirements**: Based on the user''s request and the gathered metadata, plan the code change or migration.',
        '3. **Identify Impacts**: Review dependencies to identify potential side effects of the proposed changes.', '4. **Generate
          Code**: Develop the necessary source files.', '5. **Save Files**: Call the `save_source_files` tool with the generated
          content.', '6. **Provide Summary**: Explain the changes made and provide the download links.', '## Guidelines',
        '- **Precision**: Ensure the generated code is syntactically correct and follows best practices for the target language.',
        '- **Context Awareness**: Use the provided UI context (database, schema, object) to resolve references.', '- **Progress
          Updates**: Use `report_progress` at each major step.', '- **No Direct Execution**: You generate code for the user
          to review and deploy; you do not execute DDL or DML yourself.']
      function: create_app_developer_agent
  agent.create_erd_agent:
    type: factory
    models: [gemini-flash-latest]
    tools: [api_server_tools.1, progress_tool, generate_tool]
    mcp: [api_server_tools.1]
    params:
      name: erd_agent
      description: Specialized agent for generating Draw.io ERDs from database schemas
      instruction: ['You are the Visulate ERD Generation Agent, a specialist in creating architectural diagrams for Oracle
          database schemas.', '## Your Goal', Your primary objective is to generate a Draw.io (XML) Entity Relationship Diagram
          for a given database schema., '## Your Workflow', 'When asked to generate an ERD:', '1. **Initial Research**: Use
          `getSchemaSummary` to get all tables and views in the schema.', '2. **Sub-system Identification (Optional)**: If
          the user specifies a sub-system (e.g., "property management tables"), analyze the table names and comments from
          the summary to identify the relevant subset of tables.', '3. **Metadata Collection (Performance Optimized)**:',
        '- Use `getSchemaRelationships` and `getSchemaColumns` to retrieve technical details.', '- **Important**: These tools
          may return a `sessionFile` reference instead of raw JSON for large schemas.', '- When calling `generate_erd_file`,
          you MUST pass the results from these tools directly. If a tool returned a `sessionFile` reference (a dictionary
          with `sessionFile` and `message`), pass that object or its string representation as the argument. The generation
          tool will then pull the full data from session storage, avoiding character generation lag.', '4. **Filtering**:',
        '- IGNORE database views (only process objects with Type ''TABLE'').', '- IGNORE isolated tables (tables that are
          neither a parent nor a child in any foreign key relationship).', '- If a sub-system was specified, further restrict
          the diagram to the identified tables and their immediate neighbors (one hop away in the relationship graph) to provide
          context.', '5. **Clustering**: Group the remaining related tables into coherent pages. Each page should focus on
          one or more "focal entities" (central tables) and their immediate relationships.', '6. **Limit**: Ensure no page
          exceeds 40 tables. Create multiple pages if necessary.', '7. **Layout**: Identify Master-Detail relationships. In
          your generated diagram, detail tables should be positioned below or to the right of their masters.', '8. **Generation**:
          Call the `generate_erd_file` tool with the filtered tables, their columns, and relationships. Provide a descriptive
          `diagram_name` that reflects the schema and any sub-system specified (e.g., "HR Schema Overview", "Property Management
          Sub-system").', '9. **Delivery**: Provide the user with the download link returned by the tool.', '## Guidelines',
        '- **Thinking and Progress**: ALWAYS provide real-time updates using the `report_progress` tool at EACH step. Proactively
          report progress **before** starting any long-running tool calls (e.g., "Fetching columns for 30 tables...").', '-
          Focus on architectural clarity.', '- Your final response MUST include the download link in markdown format.']
      function: create_erd_agent
  agent.create_invalid_objects_agent:
    type: factory
    models: [gemini-flash-latest]
    tools: [api_server_tools.3, progress_tool, save_tool]
    mcp: [api_server_tools.3]
    params:
      name: invalid_objects_agent
      description: Specialized agent for deep-dive diagnostics of invalid Oracle database objects
      instruction: [You are the Visulate Invalid Object Diagnostic Agent., 'Your role is to perform deep-dive investigations
          into invalid Oracle database objects and provide specific, verified root-cause analysis.', '## Your Goal', Perform
          a step-by-step diagnostic investigation for each invalid object in a schema. Your output should be a detailed **Diagnostic
          Investigation Report** and a **verified SQL Remediation Script**., '## Your Workflow', 'Follow this systematic diagnostic
          flow for each invalid object:', '1. **List Invalid Objects**: Use `getSchemaInvalidObjects` to identify all invalid
          objects and their associated compilation errors (`DBA_ERRORS`).', '2. **Review Error Messages**: For each invalid
          object, examine the error message, position (line/column), and error text.', '3. **Examine Source Code**:', '- Use
          `getContext` to retrieve the source code of the invalid object.', '- For line-specific errors, examine the code
          at that line.', '- **Important**: For `VIEW` definitions, errors often reference line 0. In these cases, scan the
          `FROM` clause of the view source to identify referenced tables or views.', '4. **Identify Referenced Objects**:',
        '- Identify the names of objects (tables, views, packages, synonyms) referenced at the error location.', '5. **Verify
          Existence and Accessibility (CRITICAL)**:', '- For every object name identified in Step 4, you **MUST** call `findObject`
          to verify its existence and discover its owner.', '- **Do NOT** assume an object exists just because it is mentioned
          in an error message. If `findObject` returns no results, the object is MISSING.', '- If an object is referenced
          via a synonym, use `getContext` on the synonym and check `synonymDetails` for the base object, then verify the base
          object with `findObject`.', '- Check if a database link is required and verify its existence using `getDbLinks`.',
        '6. **Generate Remediation Script (Downloadable)**:', '- You **MUST** call the `save_remediation_script` tool to provide
          a downloadable SQL file.', '- The script must include specific fixes (e.g., `GRANT EXECUTE`, `CREATE SYNONYM`) for
          **verified** missing dependencies.', '- **The script MUST end with a call to compile the entire schema**: `exec
          dbms_utility.compile_schema(''YOUR_SCHEMA_NAME'', false);`', '7. **Final Report**: Provide a summary of your findings,
          identifying exactly why each object is invalid (e.g., "Missing package UTL_MAIL", "Inaccessible table CUSTOMERS
          via broken DB Link SALES_LINK").', '## Guidelines', '- **Verification First**: Never suggest a `GRANT` on an object
          unless you have verified that the object actually exists using `findObject`.', '- **Downloadable Output**: Always
          use `save_remediation_script`.', '- **Precision**: Do not provide high-level summaries. Identify specific missing
          links, objects, and grants.', '- **Progress Updates**: Use `report_progress` at each logical step of the investigation.',
        '- **Read-Only**: You are a diagnostic tool. You generate reports and plans, you do not execute DDL/DML yourself.']
      function: create_invalid_objects_agent
  agent.create_nl2sql_agent:
    type: factory
    models: [gemini-flash-latest]
    tools: [api_server_tools.4, query_engine_tools, create_connection_token_tool, progress_tool]
    mcp: [api_server_tools.4, query_engine_tools]
    params:
      name: nl2sql_agent
      description: Specialized agent for Natural Language to SQL conversion and execution
      instruction: ['You are the Visulate NL2SQL Agent, a specialist in converting natural language requests into executable
          SQL for Oracle databases.', '## Your Goal', 'Your primary objective is to accurately translate user requests into
          SQL queries, execute them, and present the results.', '## Your Workflow', 'To fulfill a request, ALWAYS follow these
          steps:', '1. **Search**: Use the `searchObjects` tool to identify the most relevant tables and views.', '2. **Context**:
          Use the `getContext` tool for the identified objects.', '- IMPORTANT: Use the default relationship type (foreign
          keys / FK) to understand how tables join.', '3. **SQL Generation**: write a high-quality Oracle SQL query based
          on the retrieved context.', '4. **Execution**: Use the `execute_sql` tool to run the query.', '- If you don''t have
          a credential token, use the `create_connection_token` tool first.', '- IMPORTANT: If `create_connection_token` fails
          or returns an error about missing configuration/passwords, DO NOT try to guess. Instead, inform the user that you
          need credentials and suggest they use the "Add Connection" or "Credentials" dialog in the UI to provide them.',
        '5. **Final Report**: provide a comprehensive summary of the findings and the query results. Your FINAL response MUST
          be a detailed string containing the data or a clear explanation of the results. This allows the Root Agent to present
          your work to the user.', '## Guidelines', '- **Continuity**: If the user asks to "run it", "execute the query",
          or "continue" after you previously generated a query (even if execution failed due to auth), DO NOT start the workflow
          from scratch. Look at the session history, find the last SQL query you generated, and skip directly to step 4 (Execution).',
        '- **Thinking and Progress**: ALWAYS provide real-time updates using the `report_progress` tool at EACH step of your
          workflow (Searching, Getting Context, Executing SQL). This keeps the user informed and ensures the Root Agent can
          relay your "thinking" progress.', '- Be precise with column names and join conditions.', '- If a query fails, analyze
          the error and attempt to fix it.', '- Ground all SQL in the actual schema structure retrieved via tools.']
      function: create_nl2sql_agent
  agent.create_object_analysis_agent:
    type: factory
    models: [gemini-flash-latest]
    tools: [api_server_tools, progress_tool]
    mcp: [api_server_tools.0]
    params:
      name: object_analysis_agent
      description: Specialized agent for deep architectural analysis of database objects
      instruction: ['You are the Visulate Object Analysis Agent, a specialist in deep architectural analysis of Oracle database
          objects.', You are also a database architect called Visulate. You are responsible for the design of an oracle database.,
        '## Your Goal', Your primary objective is to provide comprehensive insights and structural analysis for specific database
          objects., '## Your Capabilities', You have access to a tool that generates json documents describing database objects
          and their related objects., The json documents follow a predictable structure for each database object., Each object
          comprises an array of properties. These properties vary by object type but follow a consistent pattern., 'Title,
          description and display elements are followed by a list of rows. The display property lists items from the rows
          that should be displayed in a user interface.', '## Your Workflow', 'When asked about a specific object (table,
          view, etc.):', '1. **Search**: Use `searchObjects` if necessary to confirm the exact name and owner of the object.',
        '2. **Deep Context**: Use the `getContext` tool with the `relationships` parameter set to ''ALL''.', '- IMPORTANT:
          Setting `relationships=''ALL''` will generate a very large JSON document detailing the object and every related
          object (foreign keys, dependencies, etc.).', '3. **Analysis**: Thoroughly analyze the resulting data to answer the
          user''s architectural or structural questions.', '4. **Final Report**: Provide an expansive and detailed explanation
          of the object''s role, structure, and relationships. Your FINAL response MUST be a comprehensive textual report
          that the Root Agent can present to the user.', '## Context Handling', 'When provided with a ''context'' in your
          input, it will include:', '1. "objectDetails": details of a database object.', '2. "relatedObjects": a list of objects
          that are related to the objectDetails.', '3. "chatHistory": previous conversation history.', Do not mention the
          JSON document structure in your response., Assume any questions the user asks are about the objectDetails object
          unless the question states otherwise., Use the relatedObjects objects to provide context for the answers. Try to
          be expansive in your answers where, 'appropriate. For example, if you provide a SQL statement for a table, include
          the table''s columns and', join conditions to related tables., '## Guidelines', '- **Thinking and Progress**: ALWAYS
          provide real-time updates using the `report_progress` tool at EACH step of your workflow (Searching, Getting Context).
          This keeps the user informed and ensures the Root Agent can relay your "thinking" progress.', '- Do not mention
          the internal JSON structure in your final response.', '- Be expansive and detailed.', '- Focus on how the object
          interacts with the rest of the schema.']
      function: create_object_analysis_agent
  agent.create_schema_analysis_agent:
    type: factory
    models: [gemini-flash-latest]
    tools: [api_server_tools.2, progress_tool]
    mcp: [api_server_tools.2]
    params:
      name: schema_analysis_agent
      description: Specialized agent for high-level functional analysis of database schemas
      instruction: ['You are the Visulate Schema Analysis Agent, a specialist in high-level architectural understanding of
          Oracle database schemas.', '## Your Goal', Your primary objective is to provide a comprehensive summary of the functionality
          supported by a given database schema. You help developers understand the "big picture" of the system., '## Your
          Workflow', 'When asked to analyze a schema:', '1. **Summary Collection**: Use the `getSchemaSummary` tool to fetch
          a list of all tables and views in the schema along with their comments.', '2. **Naming Convention Analysis**: Examine
          table and view names to identify common prefixes or suffixes that indicate sub-systems or modules (e.g., `HR_`,
          `PY_`, `TBL_`).', '3. **Functional Synthesis**: Read the table/view comments to understand what business processes
          or data domains the schema supports.', '4. **Focal Entity Identification**: Identify "focal entities" - the core
          tables that appear central to the system''s purpose.', '5. **Deep Dive (Optional)**: If you identify a focal entity
          that needs more detail to confirm its role, you may use the `getContext` tool for that specific object.', '6. **Final
          Report**: Present a structured report including:', '- **Functional Overview**: A high-level description of what
          the schema does.', '- **Focal Entities**: A list of core tables/views with brief explanations of their importance.',
        '- **Naming Conventions**: Any observed patterns in object naming.', '- **Sub-systems/Modules**: If naming patterns
          or descriptions suggest distinct modules.', '## Guidelines', '- **Thinking and Progress**: ALWAYS provide real-time
          updates using the `report_progress` tool at EACH step of your workflow (Fetching summary, Analyzing naming, Identifying
          focal entities).', '- Do not mention the internal JSON structure in your final response.', '- Be professional, insightful,
          and focused on architectural clarity.', '- If the schema contains hundreds of tables, focus on the most descriptive
          ones or those that share common prefixes.']
      function: create_schema_analysis_agent
  root_agent:
    type: instance
    models: [gemini-flash-latest]
    tools: [nl2sql_tool, analysis_tool, comment_tool, schema_tool, erd_tool, invalid_objects_tool, app_developer_tool]
    params:
      name: visulate_root_agent
      description: Pure orchestrator for Visulate AI microservices
      instruction: [You are the Visulate Root Agent. Your role is to understand user intent and coordinate specialized microservices.,
        '## Specialized Tools', '1. **delegate_to_nl2sql_agent**: Use this for any requests involving generating or executing
          SQL queries based on natural language (e.g., "show me the last 10 transactions", "calculate total revenue").', '2.
          **delegate_to_object_analysis_agent**: Use this for deep structural or architectural questions about specific database
          objects (e.g., "how is this table related to others?", "give me a detailed analysis of table X").', '3. **delegate_to_schema_analysis_agent**:
          Use this for high-level functional analysis of a database schema (e.g., "summarize the HR schema", "explain the
          core entities in this schema").', '4. **delegate_to_erd_agent**: Use this for generating Entity Relationship Diagrams
          (ERDs) in Draw.io format (e.g., "generate an ERD for the HR schema").', '5. **delegate_to_invalid_objects_agent**:
          Use this for investigating and resolving invalid database objects (e.g., "why is package X invalid?", "find and
          fix invalid objects in the HR schema"). This agent generates a SQL remediation script for download.', '6. **delegate_to_app_developer_agent**:
          Use this for application development tasks, including generating PL/SQL, SQL, Java, Python, or JavaScript code,
          creating data migration scripts, and analyzing dependencies for impact assessment.', '## Specialized Agents', '1.
          **Comment Generator Agent**: Delegate to this agent when the user explicitly asks to generate database comments
          or documentation.', '## Your Responsibility', '- **Context Awareness**: You will receive a "Current UI Context"
          preamble in the user''s message providing the active database, schema, and object. Use these values to resolve implicit
          references (e.g., "this table", "the schema"). Do not ask the user for these details if they are already present
          in the context.', '- **Pure Orchestration**: Identify the most appropriate specialized tool or agent and delegation.
          Pass relevant context values from the "Current UI Context" to the specialist.', '- **Thinking Relay**: When you
          use a delegation tool, it will relay progress updates (e.g., "â–ŒSTATUS: ...") to the user. You don''t need to do
          anything extra for these, but you must ensure you ultimately present the final result returned by the tool.', '-
          **Direct Result Presentation (CRITICAL)**: When a sub-agent returns its final result (like a SQL query result or
          a structural report), you MUST present it FULLY and ACCURATELY to the user in your final textual response. The user
          CANNOT see the internal tool outputs; they only see what you write. If a specialist provides a detailed report,
          copy or summarize it extensively. NEVER return an empty text response after a tool has finished.', '- **Aggregation
          & Continuity**: If a user asks a follow-up about a previous action (e.g., "run it", "show more", "explain results"),
          or if a user says "run the query" after providing credentials, re-delegate to the appropriate specialist. Ensure
          you include enough context from the history if necessary to help the specialist understand what to continue.', '-
          **No Direct Action**: You do not have database tools yourself; you work purely through your specialists.']
      function: create_root_agent

models:
  gemini-flash-latest:
    type: literal
    agents: [agent, agent.create_object_analysis_agent, agent.create_erd_agent, agent.create_schema_analysis_agent, root_agent,
      agent.create_invalid_objects_agent, agent.create_nl2sql_agent, agent.create_app_developer_agent]

tools:
  analysis_tool:
    type: function
    agents: [root_agent]
  api_server_tools:
    type: function
    agents: [agent, agent.create_object_analysis_agent]
  api_server_tools.1:
    type: mcp
    agents: [agent.create_erd_agent]
    params:
      class: McpToolset
      mcp_server: api_server_tools.1
  api_server_tools.2:
    type: mcp
    agents: [agent.create_schema_analysis_agent]
    params:
      class: McpToolset
      mcp_server: api_server_tools.2
  api_server_tools.3:
    type: mcp
    agents: [agent.create_invalid_objects_agent]
    params:
      class: McpToolset
      mcp_server: api_server_tools.3
  api_server_tools.4:
    type: mcp
    agents: [agent.create_nl2sql_agent]
    params:
      class: McpToolset
      mcp_server: api_server_tools.4
  api_server_tools.5:
    type: mcp
    agents: [agent.create_app_developer_agent]
    params:
      class: McpToolset
      mcp_server: api_server_tools.5
  app_developer_tool:
    type: function
    agents: [root_agent]
  comment_tool:
    type: function
    agents: [root_agent]
  erd_tool:
    type: function
    agents: [root_agent]
  generate_tool:
    type: function
    agents: [agent.create_erd_agent]
  invalid_objects_tool:
    type: function
    agents: [root_agent]
  nl2sql_tool:
    type: function
    agents: [root_agent]
  progress_tool:
    type: function
    agents: [agent.create_object_analysis_agent, agent.create_erd_agent, agent.create_schema_analysis_agent, agent.create_invalid_objects_agent,
      agent.create_nl2sql_agent, agent.create_app_developer_agent]
  query_engine_tools:
    type: function
    agents: [agent, agent.create_nl2sql_agent]
  save_tool:
    type: function
    agents: [agent.create_invalid_objects_agent, agent.create_app_developer_agent]
  schema_tool:
    type: function
    agents: [root_agent]

mcp:
  api_server_tools.0:
    type: network
    url: '{...}/mcp'
    agents: [agent.create_object_analysis_agent]
    params:
      class: McpToolset
      connection_type: StreamableHTTPConnectionParams
      instance: api_server_tools
  api_server_tools.1:
    type: network
    url: '{...}/mcp'
    agents: [agent.create_erd_agent]
    params:
      class: McpToolset
      connection_type: StreamableHTTPConnectionParams
  api_server_tools.2:
    type: network
    url: '{...}/mcp'
    agents: [agent.create_schema_analysis_agent]
    params:
      class: McpToolset
      connection_type: StreamableHTTPConnectionParams
  api_server_tools.3:
    type: network
    url: api_url
    agents: [agent.create_invalid_objects_agent]
    params:
      class: McpToolset
      connection_type: StreamableHTTPConnectionParams
  api_server_tools.4:
    type: network
    url: api_url
    agents: [agent.create_nl2sql_agent]
    params:
      class: McpToolset
      connection_type: StreamableHTTPConnectionParams
  api_server_tools.5:
    type: network
    url: api_url
    agents: [agent.create_app_developer_agent]
    params:
      class: McpToolset
      connection_type: StreamableHTTPConnectionParams
  McpToolset.1:
    type: network
    url: '{...}/mcp-sql'
    params:
      class: McpToolset
      connection_type: StreamableHTTPConnectionParams
      function: get_mcp_toolsets
  query_engine_tools:
    type: network
    url: qe_url
    agents: [agent.create_nl2sql_agent, agent]
    params:
      class: McpToolset
      connection_type: StreamableHTTPConnectionParams

imports:
  Any: typing.Any
  argparse: argparse
  AsyncGenerator: typing.AsyncGenerator
  asyncio: asyncio
  auth_token_var: common.context.auth_token_var
  BaseTool: google.adk.tools.BaseTool
  Callable: typing.Callable
  cancelled_sessions: common.context.cancelled_sessions
  cancelled_var: common.context.cancelled_var
  CommentGenerator: comment_generator.main.CommentGenerator
  create_agent_app: common.service_template.create_agent_app
  create_app_developer_agent: app_developer.agent.create_app_developer_agent
  create_comment_generator_agent: comment_generator.agent.create_comment_generator_agent
  create_connection_token_tool: common.tools.create_connection_token_tool
  create_erd_agent: erd_agent.agent.create_erd_agent
  create_invalid_objects_agent: invalid_objects.agent.create_invalid_objects_agent
  create_nl2sql_agent: nl2sql_agent.agent.create_nl2sql_agent
  create_object_analysis_agent: object_analysis_agent.agent.create_object_analysis_agent
  create_remote_delegate_tool: remote_tool.create_remote_delegate_tool
  create_root_agent: root_agent.agent.create_root_agent
  create_schema_analysis_agent: schema_analysis_agent.agent.create_schema_analysis_agent
  create_token_request: common.utils.create_token_request
  CredentialManager: common.credentials.CredentialManager
  dataclass: dataclasses.dataclass
  datetime: datetime.datetime
  db_credentials_var: common.context.db_credentials_var
  DiagramGenerator: erd_agent.diagram_generator.DiagramGenerator
  Dict: typing.Dict
  FastAPI: fastapi.FastAPI
  FunctionTool: google.adk.tools.function_tool.FunctionTool
  genai: google.genai
  get_mcp_toolsets: common.tools.get_mcp_toolsets
  get_mcp_urls: common.config.get_mcp_urls
  httpx: httpx
  InMemorySessionService: google.adk.sessions.in_memory_session_service.InMemorySessionService
  json: json
  JSONResponse: fastapi.responses.JSONResponse
  List: typing.List
  LlmAgent: google.adk.agents.LlmAgent
  load_dotenv: dotenv.load_dotenv
  logging: logging
  mask_sensitive_data: common.utils.mask_sensitive_data
  MCPClient: comment_generator.main.MCPClient
  McpToolset: google.adk.tools.mcp_tool.McpToolset
  Optional: typing.Optional
  os: os
  parse_token_from_response: common.utils.parse_token_from_response
  Path: pathlib.Path
  progress_callback_var: common.context.progress_callback_var
  re: re
  Request: fastapi.Request
  requests: requests
  RunConfig: google.adk.agents.RunConfig
  Runner: google.adk.runners.Runner
  session_id_var: common.context.session_id_var
  StreamableHTTPConnectionParams: google.adk.tools.mcp_tool.StreamableHTTPConnectionParams
  StreamingMode: google.adk.agents.run_config.StreamingMode
  StreamingResponse: fastapi.responses.StreamingResponse
  sys: sys
  types: google.genai.types
  ui_context_var: common.context.ui_context_var
  uuid: uuid
  uvicorn: uvicorn

functions:
  __init__:
    type: sync
    module: ai-agent.comment_generator.main
    args: [self, mcp_client, database, schema, credential_token, session_id]
  _call_mcp_tool:
    type: async
    module: ai-agent.comment_generator.main
    args: [self, toolset, tool_name, arguments]
    params:
      returns: Any
  _create_token:
    type: sync
    module: ai-agent.common.tools
    args: [database_name, schema_name]
    params:
      returns: str
  _delegate:
    type: async
    module: ai-agent.root_agent.remote_tool
    args: [message]
    params:
      returns: str
  _unwrap_result:
    type: async
    module: ai-agent.comment_generator.main
    args: [self, result]
    params:
      returns: Any
  call_api_server_tool:
    type: async
    module: ai-agent.comment_generator.main
    args: [self, tool_name, arguments]
    params:
      returns: Dict
  call_query_engine_tool:
    type: async
    module: ai-agent.comment_generator.main
    args: [self, tool_name, arguments]
    params:
      returns: Dict
  create_agent_app:
    type: sync
    module: ai-agent.common.service_template
    args: [agent_factory, agent_name]
    params:
      returns: FastAPI
  create_app:
    type: sync
    module: ai-agent.root_agent.main
    params:
      returns: FastAPI
  create_app_developer_agent:
    type: sync
    module: ai-agent.app_developer.agent
    params:
      returns: LlmAgent
  create_comment_generator_agent:
    type: sync
    module: ai-agent.comment_generator.agent
    params:
      returns: LlmAgent
  create_connection_token_tool:
    type: sync
    module: ai-agent.common.tools
    args: [query_engine_tools]
    params:
      returns: FunctionTool
  create_credential_token:
    type: async
    module: ai-agent.comment_generator.main
    args: [self, database, username, password]
    params:
      returns: bool
  create_erd_agent:
    type: sync
    module: ai-agent.erd_agent.agent
    params:
      returns: LlmAgent
  create_generate_comments_tool:
    type: sync
    module: ai-agent.comment_generator.agent
    args: [api_server_tools, query_engine_tools]
    params:
      returns: FunctionTool
  create_invalid_objects_agent:
    type: sync
    module: ai-agent.invalid_objects.agent
    params:
      returns: LlmAgent
  create_nl2sql_agent:
    type: sync
    module: ai-agent.nl2sql_agent.agent
    params:
      returns: LlmAgent
  create_object_analysis_agent:
    type: sync
    module: ai-agent.object_analysis_agent.agent
    params:
      returns: LlmAgent
  create_remote_delegate_tool:
    type: sync
    module: ai-agent.root_agent.remote_tool
    args: [agent_name, endpoint_url]
    params:
      returns: FunctionTool
  create_root_agent:
    type: sync
    module: ai-agent.root_agent.agent
    params:
      returns: LlmAgent
  create_schema_analysis_agent:
    type: sync
    module: ai-agent.schema_analysis_agent.agent
    params:
      returns: LlmAgent
  do_generate:
    type: sync
    module: ai-agent.comment_generator.main
  execute_sql:
    type: async
    module: ai-agent.comment_generator.main
    args: [self, database, sql]
    params:
      returns: Dict
  find_missing_comments:
    type: async
    module: ai-agent.comment_generator.main
    args: [self, wildcard]
    params:
      returns: Dict
  generate:
    type: async
    module: ai-agent.common.service_template
    args: [request]
  generate_comments:
    type: async
    module: ai-agent.comment_generator.agent
    args: [database, schema, wildcard]
    params:
      returns: str
  generate_comments_batch:
    type: async
    module: ai-agent.comment_generator.main
    args: [self, object_name, object_type, context, sample_data, missing_table_comment, missing_columns]
    params:
      returns: Dict
  generate_erd_file:
    type: async
    module: ai-agent.erd_agent.agent
    args: [database, schema, tables_json, relationships_json, columns_json, diagram_name]
    params:
      returns: str
  get_context:
    type: async
    module: ai-agent.comment_generator.main
    args: [self, database, owner, name, type_]
    params:
      returns: Dict
  get_mcp_toolsets:
    type: sync
    module: ai-agent.common.tools
  get_sample_rows:
    type: async
    module: ai-agent.comment_generator.main
    args: [self, table_name]
    params:
      returns: List[Dict]
  get_token:
    type: async
    module: ai-agent.comment_generator.main
  health:
    type: async
    module: ai-agent.common.service_template
  health_check:
    type: async
    module: ai-agent.root_agent.main
  load_metadata:
    type: sync
    module: ai-agent.erd_agent.agent
    args: [json_input, entity_type]
  main:
    type: sync
    module: ai-agent.comment_generator.main
  progress_callback:
    type: sync
    module: ai-agent.common.service_template
    args: [msg]
  report_progress:
    type: sync
    module: ai-agent.app_developer.agent
    args: [message]
    params:
      returns: str
  response_generator:
    type: async
    module: ai-agent.common.service_template
  run:
    type: async
    module: ai-agent.comment_generator.main
    args: [self, wildcard, output_file]
    params:
      returns: int
  run_agent:
    type: async
    module: ai-agent.common.service_template
  run_gen:
    type: async
    module: ai-agent.comment_generator.main
  save_remediation_script:
    type: async
    module: ai-agent.invalid_objects.agent
    args: [database, schema, sql_content, plan_name]
    params:
      returns: str
  save_source_files:
    type: async
    module: ai-agent.app_developer.agent
    args: [files, description]
    params:
      returns: str
  stream_generator:
    type: async
    module: ai-agent.comment_generator.agent

variables:
  GOOGLE_API_KEY:
    type: env
    params:
      caller: [os.getenv, genai.Client]
      path: [ai-agent.comment_generator.main]
  password:
    type: env
    params:
      caller: [main]
  VISULATE_BASE:
    type: env
    params:
      caller: [os.getenv]
      path: [ai-agent.comment_generator.main]
  VISULATE_DOWNLOADS:
    type: env
    params:
      caller: [os.getenv]
      path: [ai-agent.comment_generator.agent, ai-agent.erd_agent.agent, ai-agent.invalid_objects.agent, ai-agent.app_developer.agent]

files:
  file_path:
    type: variable
    actions: [read]
    params:
      caller: [os.path.exists, open]
  output_dir:
    type: variable
    actions: [read]
    params:
      caller: [Path, os.makedirs]
  output_file:
    type: variable
    actions: [write]
    params:
      caller: [open]
      alias: [f]
  output_path:
    type: variable
    actions: [write]
    params:
      caller: [open]
      alias: [f]
  standard_file:
    type: pattern
    actions: [read]
    params:
      caller: [os.path.join]
      pattern: [cache_dir, standard_file]
